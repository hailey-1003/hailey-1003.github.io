<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-ES006" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/17/ES006/" class="article-date">
  <time class="dt-published" datetime="2021-02-17T09:25:36.000Z" itemprop="datePublished">2021-02-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/17/ES006/">（六）ES6：扩展运算符 与 rest参数</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>扩展预算符</strong>：将数组或者类数组展开成用逗号隔开的值。</p>
<p><strong>rest参数</strong>：把逗号隔开的值组合成一个数组。</p>
<p>扩展预算符与 rest 参数都是使用<code>...</code>来表示。我们可以这样区分：如果<code>...</code>在等号的左边或者形参的位置上，那它就是 rest 参数；如果<code>...</code>在等号的右边或者在实参上，那它就是扩展运算符。</p>
<p>我们来看一下扩展预算符的用法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(...arr) <span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 扩展预算符也可以对字符串使用</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="keyword">let</span> arr = [...str]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [&quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]</span></span><br></pre></td></tr></table></figure>

<p>我们再看一下 rest 参数的用法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args) <span class="comment">// [1, 2, 3]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo2</span>(<span class="params">x, ...args</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x) <span class="comment">// 1</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(args) <span class="comment">// [2, 3]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo2</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>rest参数也可以与结构赋值一起使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x) <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(y) <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a, ...b] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b) <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure>



<img src="1.jpeg">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/17/ES006/" data-id="clur520qb0008mocc9mnufdl6" data-title="（六）ES6：扩展运算符 与 rest参数" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES/" rel="tag">ES</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ES005" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/17/ES005/" class="article-date">
  <time class="dt-published" datetime="2021-02-17T04:25:36.000Z" itemprop="datePublished">2021-02-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/17/ES005/">（五）ES6：函数参数的新特性</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="1-参数的默认值"><a href="#1-参数的默认值" class="headerlink" title="1. 参数的默认值"></a>1. 参数的默认值</h3><p>在 ES6 中可以很方便的给函数设置默认值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">x, y = <span class="string">&#x27;world&#x27;</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x, y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>(<span class="string">&#x27;hello&#x27;</span>) <span class="comment">// hello world</span></span><br></pre></td></tr></table></figure>

<p>注意：函数内部不能对形参再次声明；函数的形参不能重名；有默认值的参数要放在最后。</p>
<h3 id="2-与结构赋值结合"><a href="#2-与结构赋值结合" class="headerlink" title="2. 与结构赋值结合"></a>2. 与结构赋值结合</h3><p>我们在前面讲过结构赋值，在这里补充一点：如果使用了结构赋值，在没有给默认值的情况下就必须给实参，否则会报错。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">x, y = <span class="number">5</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x, y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>() <span class="comment">// undefined 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo2</span>(<span class="params">&#123;x, y = <span class="number">5</span>&#125;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x, y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo2</span>(&#123;<span class="attr">x</span>: <span class="number">1</span>&#125;) <span class="comment">// 1 5</span></span><br><span class="line"><span class="title function_">foo2</span>() <span class="comment">// 报错，提示 Cannot read property &#x27;x&#x27; of undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="3-length-属性"><a href="#3-length-属性" class="headerlink" title="3. length 属性"></a>3. length 属性</h3><p>函数的 length 属性是 没有指定默认值的参数的个数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">x, y = <span class="number">5</span></span>) &#123;&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo.<span class="property">length</span>) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h3 id="4-参数的作用域"><a href="#4-参数的作用域" class="headerlink" title="4. 参数的作用域"></a>4. 参数的作用域</h3><p>一旦给参数设置了默认值，那么参数就会形成一个单独的作用域。这种情况在不设置默认值的时候是不会出现的。具体看下面的几个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">x, y = x</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(y) <span class="comment">//2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>在上面的例子中，y的值输出为2。因为函数的参数会形成一个单独的作用域，在该作用域中，x被赋值为2，因此y的值也为2。我们再看下一个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">x, y = x</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(y) <span class="comment">// undefined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>()</span><br></pre></td></tr></table></figure>

<p>在参数的作用域中，y被赋值时找到了x，因为此时x为undefined，因此y的值也为undefined。上述的两个例子中，参数的作用域里都有x。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">y = x</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">2</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(y) <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>()</span><br></pre></td></tr></table></figure>

<p>在这个例子中，参数的作用域里并没有x，因此y被赋值时，就会沿着作用域链向上查找。然后查找到了全局变量x，并将全局变量x的值赋值给了y。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">y = x</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">2</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(y) <span class="comment">// 报错，x is not defined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>()</span><br></pre></td></tr></table></figure>

<p>我们上一个例子说了，参数的作用域内没找到x时，会沿着作用域链向外查找，而并不会向内查找。因此是查找不到变量x的，故而报错。</p>
<h3 id="5-函数的-name-属性"><a href="#5-函数的-name-属性" class="headerlink" title="5. 函数的 name 属性"></a>5. 函数的 name 属性</h3><p>一般而言，在 function 关键字后面就会跟着函数名，函数的 name 属性就是指向这个函数名。但是在使用匿名函数与使用 bind() 方法时，情况会有所不同。我们通过下面的例子来更好地理解函数的 name 属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo.<span class="property">name</span>) <span class="comment">// foo</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(foo.<span class="title function_">bind</span>().<span class="property">name</span>) <span class="comment">//bound foo</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="keyword">new</span> <span class="title class_">Function</span>).<span class="property">name</span>) <span class="comment">// anonymous</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="keyword">new</span> <span class="title class_">Function</span>).<span class="title function_">bind</span>().<span class="property">name</span>) <span class="comment">// bound anonymous</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;).<span class="property">name</span>) <span class="comment">// (空字符串)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;).<span class="title function_">bind</span>().<span class="property">name</span>) <span class="comment">// bound</span></span><br></pre></td></tr></table></figure>



<img src="1.jpeg">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/17/ES005/" data-id="clur520q70005moccavur7fhl" data-title="（五）ES6：函数参数的新特性" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES/" rel="tag">ES</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ES004" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/16/ES004/" class="article-date">
  <time class="dt-published" datetime="2021-02-16T10:25:36.000Z" itemprop="datePublished">2021-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/16/ES004/">（四）ES5、ES6：数组的扩展</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="1-类数组-x2F-伪数组"><a href="#1-类数组-x2F-伪数组" class="headerlink" title="1. 类数组&#x2F;伪数组"></a>1. 类数组&#x2F;伪数组</h3><p>使用<code>document.getElementsByTagName()</code>与<code>document.getElementsByClassName()</code>返回的是 <strong>HTMLCollection</strong> 对象，<code>document.querySelectorAll()</code>返回的是 <strong>NodeList</strong> 对象。HTMLCollection 对象与 NodeList 对象 就是类数组&#x2F;伪数组。它们像数组一样具有 length 属性，但并不是真正的数组，不具有数组的方法。常见的伪数组还有函数的参数对象 arguments。</p>
<h4 id="将伪数组转换为数组的方法："><a href="#将伪数组转换为数组的方法：" class="headerlink" title="将伪数组转换为数组的方法："></a>将伪数组转换为数组的方法：</h4><h5 id="1）ES5-：-slice"><a href="#1）ES5-：-slice" class="headerlink" title="1）ES5 ： slice()"></a>1）ES5 ： <code>slice()</code></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(div)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr <span class="keyword">instanceof</span> <span class="title class_">Array</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h5 id="2）ES6：-Array-from"><a href="#2）ES6：-Array-from" class="headerlink" title="2）ES6： Array.from()"></a>2）ES6： <code>Array.from()</code></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我们首先自己定义一个为数组</span></span><br><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="string">&#x27;es6&#x27;</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="string">&#x27;es7&#x27;</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">&#x27;es8&#x27;</span>,</span><br><span class="line">  <span class="attr">length</span>: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br></pre></td></tr></table></figure>

<p>返回值如下：</p>
<img src="1.png" width="40%">

<h3 id="2-构造数组"><a href="#2-构造数组" class="headerlink" title="2. 构造数组"></a>2. 构造数组</h3><p>首先回顾一下 ES5 中构造数组的方法，我们知道可以使用字面量的方式与 new Array 的方式来创建数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">1</span>,<span class="number">2</span>) <span class="comment">// 创建一个值为[1,2]的数组</span></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>) <span class="comment">// 创建一个长度为3的空数组</span></span><br></pre></td></tr></table></figure>

<p>使用 new 方法时，如果只传入一个参数，那么那个参数就是数组的长度。有什么办法可以创建值为 [3] 的数组吗？我们可以使用 ES6 中的<code>Array.of()</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">1</span>,<span class="number">2</span>) <span class="comment">// 创建一个值为[1,2]的数组</span></span><br><span class="line"><span class="keyword">let</span> arr = <span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">3</span>) <span class="comment">// 创建一个值为[3]的数组</span></span><br></pre></td></tr></table></figure>

<h3 id="3-ES6-中替换数组元素"><a href="#3-ES6-中替换数组元素" class="headerlink" title="3. ES6 中替换数组元素"></a>3. ES6 中替换数组元素</h3><p>使用<code>copyWithin()</code>方法替换数组元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">copyWithin</span>(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>)) <span class="comment">// [1, 4, 5, 4, 5]</span></span><br><span class="line"><span class="comment">// 第一个参数为被替换元素的起始下标，第二个参数为替代部分的起始下标，（可省略）第三个参数为替代部分的结束下标+1</span></span><br></pre></td></tr></table></figure>

<h3 id="4-ES6-中填充数组"><a href="#4-ES6-中填充数组" class="headerlink" title="4. ES6 中填充数组"></a>4. ES6 中填充数组</h3><p>使用<code>fill()</code>方法填充数组。具体用法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">3</span>).<span class="title function_">fill</span>(<span class="number">6</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [6, 6, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">arr.<span class="title function_">fill</span>(<span class="string">&#x27;apple&#x27;</span>, <span class="number">1</span>, <span class="number">3</span>) <span class="comment">// (替换的内容,被替换的起始坐标，被替换的结束坐标+1)，第二个与第三个参数可省略</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [1, &quot;apple&quot;, &quot;apple&quot;, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h3 id="5-检测数组中是否包含目标元素"><a href="#5-检测数组中是否包含目标元素" class="headerlink" title="5. 检测数组中是否包含目标元素"></a>5. 检测数组中是否包含目标元素</h3><p>在 ES5 中，使用<code>IndexOf()</code>方法进行检测，若目标元素存在，则返回对应下标，否则返回 -1。在 ES6 中，使用<code>includes()</code>方法进行检测，若目标元素存在则返回 true，否者返回 false。但是还有一点值得注意的是，这两个方法检测 NaN 的结果不同。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="title class_">NaN</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">indexOf</span>(<span class="title class_">NaN</span>)) <span class="comment">// 返回-1，此方法无法检测NaN</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">includes</span>(<span class="title class_">NaN</span>)) <span class="comment">// 返回true，此方法可以检测NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span> === <span class="title class_">NaN</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/16/ES004/" data-id="clur520q70004moccbidc2qev" data-title="（四）ES5、ES6：数组的扩展" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES/" rel="tag">ES</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ES003" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/16/ES003/" class="article-date">
  <time class="dt-published" datetime="2021-02-16T04:06:36.000Z" itemprop="datePublished">2021-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/16/ES003/">（三）ES5、ES6：数组的遍历方式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、ES5-中数组的遍历方式"><a href="#一、ES5-中数组的遍历方式" class="headerlink" title="一、ES5 中数组的遍历方式"></a>一、ES5 中数组的遍历方式</h2><h4 id="1）for"><a href="#1）for" class="headerlink" title="1）for"></a>1）for</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; <span class="number">1</span>&lt;arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(arr[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2）forEach"><a href="#2）forEach" class="headerlink" title="2）forEach()"></a>2）forEach()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">elem, index, array</span>) &#123;</span><br><span class="line">  elem += <span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure>

<p>forEach() 方法内不支持 break 与 continue。forEach() 方法没有返回值。forEach() 方法不会改变原数组的值。</p>
<h4 id="3）map"><a href="#3）map" class="headerlink" title="3）map()"></a>3）map()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = arr.<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  value += <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result) <span class="comment">// [2,3,4]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure>

<p>map() 方法返回每次函数调用的返回值组成的数组。map() 方法不会改变原数组的值。</p>
<h4 id="4）filter"><a href="#4）filter" class="headerlink" title="4）filter()"></a>4）filter()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = arr.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (value%<span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result) <span class="comment">// [1,3]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure>

<p>filter() 方法返回该函数返回 true 的项组成的数组。</p>
<h4 id="5）some"><a href="#5）some" class="headerlink" title="5）some()"></a>5）some()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = arr.<span class="title function_">some</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (value%<span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result) <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure>

<p>如果该函数对任意一项返回 true，则 some() 方法返回 true，否则返回 false。</p>
<h4 id="6）every"><a href="#6）every" class="headerlink" title="6）every()"></a>6）every()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = arr.<span class="title function_">every</span>(<span class="keyword">function</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (value%<span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result) <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr) <span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure>

<p>如果该函数对每一项都返回 true，则 every() 方法返回 true，否则返回 false。</p>
<h4 id="7）reduce-和-reduceRight"><a href="#7）reduce-和-reduceRight" class="headerlink" title="7）reduce() 和 reduceRight()"></a>7）reduce() 和 reduceRight()</h4><p>reduce() 方法和 reduceRight() 方法会迭代数组所用项，然后构建一个最终的返回值。reduce() 方法从数组的第一项开始遍历到最后；reduceRight() 方法从数组的最后一项开始遍历到第一项。这两个方法都接受2个参数：一个在每一项上调用的函数 和 （可选的）作为归并基础的初始值。其中该函数接受4个参数：前一个值、当前值、项的索引、数组对象。这个函数的返回值会作为第一个参数自动传给下一项。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line"><span class="keyword">let</span> max = arr.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">prev, cur, index, array</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(prev, cur)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<p>reduce() 方法没有给定第二个参数时，第一次迭代发生在数组的第二项上，此时函数的第一个参数是数组的第一项，第二个参数是数组的第二项。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">prev, cur</span>) &#123; </span><br><span class="line">  prev.<span class="title function_">indexOf</span>(cur) == -<span class="number">1</span> &amp;&amp; prev.<span class="title function_">push</span>(cur) <span class="comment">// imdexOf()方法根据值查找索引，如果没查找到则返回 -1</span></span><br><span class="line">  <span class="keyword">return</span> prev</span><br><span class="line">&#125;, [])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// [1,3,5]</span></span><br></pre></td></tr></table></figure>

<p>reduce() 方法给定了第二个参数时，第一次迭代发生在数组的第一项上，此时函数的第一个参数是 reduce() 方法的第二个参数（即作为归并基础的初始值），第二个参数是数组的第一项。</p>
<h4 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h4><p><strong>不要使用 for in 来遍历数组</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">foo</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> index <span class="keyword">in</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index, arr[index])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出如下：</p>
<img src="1.png" width="30%">

<p>很明显，这并不是我们想要的结果，因此不要使用 for in 来遍历数组。</p>
<h2 id="二、ES6-中数组的遍历方式"><a href="#二、ES6-中数组的遍历方式" class="headerlink" title="二、ES6 中数组的遍历方式"></a>二、ES6 中数组的遍历方式</h2><h4 id="1）find"><a href="#1）find" class="headerlink" title="1）find()"></a>1）find()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>]</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">find</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> value == <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>find() 方法返回第一个返回值为 true 的元素。</p>
<h4 id="2）findIndex"><a href="#2）findIndex" class="headerlink" title="2）findIndex()"></a>2）findIndex()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">findIndex</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> value == <span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>findIndex() 方法返回第一个返回值为 true 的元素的索引。</p>
<h4 id="3）for-of-与-values-、keys-、entries"><a href="#3）for-of-与-values-、keys-、entries" class="headerlink" title="3）for of 与 values()、keys()、entries()"></a>3）for of 与 values()、keys()、entries()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">foo</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">&#125; <span class="comment">// 输出：1   2   3  ，可以看出不会输出foo方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> arr.<span class="title function_">values</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">&#125; <span class="comment">// 输出：1   2   3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> arr.<span class="title function_">keys</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">&#125; <span class="comment">// 输出：0   1   2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [index, item] <span class="keyword">of</span> arr.<span class="title function_">entries</span>()) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index, item)</span><br><span class="line">&#125; <span class="comment">// 输出：0 1   1 2   2 3</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/16/ES003/" data-id="clur520q20001mocc7jut9267" data-title="（三）ES5、ES6：数组的遍历方式" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES/" rel="tag">ES</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ES002" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/15/ES002/" class="article-date">
  <time class="dt-published" datetime="2021-02-15T14:25:36.000Z" itemprop="datePublished">2021-02-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/15/ES002/">（二）ES6：解构赋值</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>解构复制就是按照一定模式，从数组和对象中提取值，对变量进行赋值。</p>
<h4 id="数组的解构赋值"><a href="#数组的解构赋值" class="headerlink" title="数组的解构赋值"></a>数组的解构赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c) <span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a,b,[c,d]] = [<span class="number">1</span>,<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c) <span class="comment">// 1 2 3 4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c) <span class="comment">// 1 2 [3,4]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a,b,[c]] = [<span class="number">1</span>,<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c) <span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a,b,[c],d] = [<span class="number">1</span>,<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c) <span class="comment">// 1 2 3 undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a,b,[c],d=<span class="number">5</span>] = [<span class="number">1</span>,<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>]] <span class="comment">// 给 d 默认值 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c) <span class="comment">// 1 2 3 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [a,b,[c],d=<span class="number">5</span>] = [<span class="number">1</span>,<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>],<span class="number">6</span>] </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c) <span class="comment">// 1 2 3 6 ,给 d 传递值了就不读默认值</span></span><br></pre></td></tr></table></figure>

<h4 id="对象的解构赋值"><a href="#对象的解构赋值" class="headerlink" title="对象的解构赋值"></a>对象的解构赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user1 = &#123;</span><br><span class="line">  <span class="attr">name1</span>: <span class="string">&#x27;xiaoming&#x27;</span>,</span><br><span class="line">  <span class="attr">age1</span>: <span class="number">24</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;age1, name1&#125; = user1</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name1, age1) <span class="comment">// xiaoming 34 ，对象是通过 key 进行解构赋值，数组是通过位置（下标）进行解构赋值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user2 = &#123;</span><br><span class="line">  <span class="attr">name2</span>: <span class="string">&#x27;xiaoming&#x27;</span>,</span><br><span class="line">  <span class="attr">age2</span>: <span class="number">24</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">age2</span>: uage, <span class="attr">name2</span>: uname&#125; = user2 <span class="comment">// 对 age2 和 name2 重命名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uname, uage) <span class="comment">// xiaoming 34 ,改名后再读 name2 和 age2 会报错</span></span><br></pre></td></tr></table></figure>

<h4 id="字符串的解构赋值"><a href="#字符串的解构赋值" class="headerlink" title="字符串的解构赋值"></a>字符串的解构赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="keyword">let</span> [a,b,c,d,e] = str</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c,d,e) <span class="comment">// h e l l o</span></span><br></pre></td></tr></table></figure>

<h4 id="函数的解构赋值"><a href="#函数的解构赋值" class="headerlink" title="函数的解构赋值"></a>函数的解构赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数的解构赋值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo1</span>(<span class="params">[a,b,c]</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="title function_">foo1</span>(arr) <span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo2</span>(<span class="params">&#123;name, age=<span class="number">18</span>&#125;</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(&#123;name, age&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;lily&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">24</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo2</span>(obj) <span class="comment">// lily, 24</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回值的解构赋值</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo3</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;lily&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">24</span></span><br><span class="line">	&#125;</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;name, age&#125; = <span class="title function_">foo3</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name, age) <span class="comment">// lily, 24  // 返回值为数组时同理</span></span><br></pre></td></tr></table></figure>

<h4 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">123</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> [a = <span class="title function_">foo</span>()] = [<span class="number">1</span>]</span><br><span class="line"><span class="comment">// 不会输出123，因为解构赋值是惰性的，给 a 进行了赋值就不会读取默认值，函数 foo 不会被执行</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [b = <span class="title function_">foo</span>()] = []</span><br><span class="line"><span class="comment">// 此时会输出123</span></span><br></pre></td></tr></table></figure>

<h4 id="提取-json-数据"><a href="#提取-json-数据" class="headerlink" title="提取 json 数据"></a>提取 json 数据</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> json = <span class="string">&#x27;&#123;&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: &quot;world&quot;&#125;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> &#123;a, b&#125; = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json) <span class="comment">// JSON.parse() 方法用于将json字符串转换成对象，再用对象的解构赋值方法就可以了</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a,b) <span class="comment">// hello world</span></span><br></pre></td></tr></table></figure>

<img src="1.jpeg">


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/15/ES002/" data-id="clur520q60003mocc97zearlj" data-title="（二）ES6：解构赋值" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES/" rel="tag">ES</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ES001" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/15/ES001/" class="article-date">
  <time class="dt-published" datetime="2021-02-15T13:25:36.000Z" itemprop="datePublished">2021-02-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/15/ES001/">（一）ES6：新的声明方式 let与const</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、新的声明方式：let"><a href="#一、新的声明方式：let" class="headerlink" title="一、新的声明方式：let"></a>一、新的声明方式：let</h2><ul>
<li>不属于顶层对象 window</li>
<li>不允许重复声明</li>
<li>不存在变量提升</li>
<li>暂时性死区</li>
<li>块级作用域</li>
</ul>
<h3 id="1-1-不属于顶层对象-window"><a href="#1-1-不属于顶层对象-window" class="headerlink" title="1.1 不属于顶层对象 window"></a>1.1 不属于顶层对象 window</h3><h4 id="var-声明方式：写-var-和不写-var-有区别"><a href="#var-声明方式：写-var-和不写-var-有区别" class="headerlink" title="var 声明方式：写 var 和不写 var 有区别"></a>var 声明方式：写 var 和不写 var 有区别</h4><p><strong>写 var 是在当前作用域下声明一个变量；不写 var 是给全局对象 window 添加了一个属性，并且对属性进行了赋值。</strong>（可以使用 delete 进行验证，delete 只能删除属性不能删除变量）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局环境下</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">5</span></span><br><span class="line">b = <span class="number">6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">a</span>) <span class="comment">// 输出5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">b</span>) <span class="comment">// 输出6</span></span><br></pre></td></tr></table></figure>

<p>既然 a 是一个变量，为什么通过 window.a 也可以访问到变量 a ？这是 JS 作者在设计之初的一个很大的问题，作者将<strong>顶层对象的属性和全局变量进行了挂钩</strong>。这也是被很多人诟病的问题之一，因为当我们做一个大型项目的时候，里面有很多全局变量，如果这些全局变量都被挂载到 window 对象下面的话，那么 window 这个变量就会变得越来越大，我们也将这个称为<strong>污染全局变量</strong>。而新的声明 let 就解决了这个问题，let 不属于顶层对象 window，使用 let 声明的全局变量不会与顶层对象的属性挂钩。</p>
<h3 id="1-2-不允许重复声明"><a href="#1-2-不允许重复声明" class="headerlink" title="1.2 不允许重复声明"></a>1.2 不允许重复声明</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">5</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">6</span> <span class="comment">// 不会报错，后定义的会覆盖先定义的</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">5</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">6</span> <span class="comment">// 会报错</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-不存在变量提升"><a href="#1-3-不存在变量提升" class="headerlink" title="1.3 不存在变量提升"></a>1.3 不存在变量提升</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 输出 undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>以上代码不会报错，因为 var 会变量提升，相当于以下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 输出 undefined</span></span><br><span class="line">a = <span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>但是 let 不存在变量提升：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// 报错</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">5</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4-暂时性死区"><a href="#1-4-暂时性死区" class="headerlink" title="1.4 暂时性死区"></a>1.4 暂时性死区</h3><p>ES6 规定，如果区块中存在 <code>let</code> 和 <code>const</code> 命令，这个区块对这些命令声明的变量，从一开始就形成了封闭作用域。凡是在声明之前就使用这些变量，就会报错。</p>
<p>总之，在代码块内，使用 let 命令声明变量之前，该变量都是不可用的。这在语法上，称为“暂时性死区”（temporal dead zone，简称TDZ）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">5</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  a = <span class="number">6</span></span><br><span class="line">  <span class="keyword">let</span> a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码会报错，因为花括号里形成了暂时性死区，相当于一个封闭的作用域。在这个封闭的作用域内，我们先使用 a 再用 let 定义 a 就导致了错误。有些暂时性死区是很隐蔽的，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo1</span>(<span class="params">a = b, b = <span class="number">2</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo1</span>() <span class="comment">// 报错，执行 a = b 时 b 还未被定义，此时就是未定义却使用了 b</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo2</span>(<span class="params">a = <span class="number">2</span>, b = a</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo2</span>() <span class="comment">// 不会报错，因为 a 在被使用前已被定义</span></span><br></pre></td></tr></table></figure>

<p>函数名后面的小括号内行成了一个暂时性死区。</p>
<p>暂时性死区的本质就是防止变量在声明之前被使用。</p>
<h3 id="1-5-块级作用域"><a href="#1-5-块级作用域" class="headerlink" title="1.5 块级作用域"></a>1.5 块级作用域</h3><p>我们都知道，在 ES5 中使用 var 定义的只有全局作用域和函数作用域，不存在块级作用域。但是在 ES6 中增加了块级作用域。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i) <span class="comment">// 输出3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i) <span class="comment">// 报错，i 只能在块级作用域内（此时是for循环内）使用，因此会报错并提示 i 未被定义</span></span><br></pre></td></tr></table></figure>

<p>还有一点值得注意的是，在 ES5 中，如果 if 后面只跟了一个语句，是可以省略花括号的；但是在 ES6 中，块级作用域是不可以将花括号省略掉的。如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) <span class="keyword">var</span> a = <span class="number">5</span> <span class="comment">// 不报错</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) <span class="keyword">let</span> a = <span class="number">5</span> <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<p>当然，我们的建议也是无论在什么时候都要把这个花括号写上。</p>
<h3 id="1-6-补充"><a href="#1-6-补充" class="headerlink" title="1.6 补充"></a>1.6 补充</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码会输出三个3，因为定时器属于异步操作，要等到同步操作执行完毕且时间到达后才执行。因此当执行定时器执行时，for 循环已执行完毕，i 等于3。如何能够输出 0、1、2 呢 ，方法一就是使用我们以前学过的闭包：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++) &#123;</span><br><span class="line">  (<span class="keyword">function</span>(<span class="params">j</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(j)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还有一种方法就是使用 let，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样也可以输出0、1、2。我们看一下以上代码被编译成 ES5 的时候是怎样的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _loop = <span class="keyword">function</span> <span class="title function_">_loop</span>(<span class="params">i</span>) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="title function_">_loop</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也就是使用 let 方式，当代码被转化成 ES5 语法时，会自动形成一个闭包。</p>
<blockquote>
<p>可以进入 babel 官网，点击试一试，可以在线地将 ES6 语法转化成 ES5 语法。</p>
</blockquote>
<h2 id="二、新的声明方式：const"><a href="#二、新的声明方式：const" class="headerlink" title="二、新的声明方式：const"></a>二、新的声明方式：const</h2><ul>
<li>不属于顶层对象 window</li>
<li>不允许重复声明</li>
<li>不存在变量提升</li>
<li>暂时性死区</li>
<li>块级作用域</li>
</ul>
<p>const 与 let 的区别就是，let 声明的是变量，而 const 声明的是常量。</p>
<p>ES5 中定义常量的 API 如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 给 window 对象定义名为 PI 的属性</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">window</span>, <span class="string">&#x27;PI&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">3.14</span> <span class="comment">// 属性值</span></span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">false</span> <span class="comment">// 将属性配置为不可修改，以表示常量</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在 ES6 中直接使用 const 声明的就是常量，并且 const 声明的变量需要在声明的时候就被赋值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a</span><br><span class="line">a = <span class="number">5</span> <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<p>我们知道，基本类型的值存在栈内，引用类型的值存在堆里面，栈里只存放了引用类型的引用地址。如下所示：</p>
<img src="1.jpeg"  width="80%">

<p><strong>const 定义的引用类型的引用地址不可以改变，但是引用类型的值可以改变。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;xiaoming&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">obj.<span class="property">age</span> = <span class="number">24</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj) <span class="comment">// 输出的obj里包含age属性</span></span><br></pre></td></tr></table></figure>

<p>使用<code>Object.freeze()</code>可以让 const 定义的对象和基本类型一样，值不能被改变。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;xiaoming&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">freeze</span>(obj) <span class="comment">// 只有对象可以使用这个方法，数组不行</span></span><br><span class="line">obj.<span class="property">age</span> = <span class="number">24</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj) <span class="comment">// 输出的obj里不包含age属性</span></span><br></pre></td></tr></table></figure>

<p>但是 Object.freeze() 实现的是浅层冻结，如下所示，它只能冻结 skill 属性的引用地址，但是冻结不了里面的值。如果还想冻结 skill 只能再补充 Object.freeze(obj.skill)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;xiaoming&#x27;</span>,</span><br><span class="line">  <span class="attr">skill</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;code&#x27;</span>,</span><br><span class="line">    <span class="attr">year</span>: <span class="number">10</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">freeze</span>(obj)</span><br><span class="line">obj.<span class="property">skill</span>.<span class="property">year</span> = <span class="number">11</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj) <span class="comment">// 输出的obj的skill的year的值为11</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/15/ES001/" data-id="clur520pu0000moccaakxazgm" data-title="（一）ES6：新的声明方式 let与const" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES/" rel="tag">ES</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-HTTP005" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/04/HTTP005/" class="article-date">
  <time class="dt-published" datetime="2021-02-04T08:25:36.000Z" itemprop="datePublished">2021-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/04/HTTP005/">CORS跨域资源共享、CORS预请求</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、CORS-跨域资源共享"><a href="#一、CORS-跨域资源共享" class="headerlink" title="一、CORS 跨域资源共享"></a>一、CORS 跨域资源共享</h2><p>CORS 全称为 Cross-origin resourse sharing，即跨域资源共享，它允许浏览器向跨域服务器发送 Ajax 请求，克服了 Ajax 只能同源使用的限制。</p>
<p>JSONP 是绕过了同源限制，发送的也不是 Ajax 请求；CORS 直接允许浏览器向跨域的服务器发生 Ajax 请求。</p>
<p>CORS 简单来说就是，服务器允许你跨域访问它，客户端就可以跨域访问它；服务器不允许你跨域访问它，客户端就不可以跨域访问它。</p>
<p><strong>这个方式只需要在服务器端做一些配置，客户端只需要保持原有的 Ajax 代码即可。</strong></p>
<p>我们可以在服务器端增加以下代码（node.js）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;</span><br><span class="line">  <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注意：不论是否有这个，浏览器都会向服务器发送请求，因为浏览器并不知道这个请求是不是跨域请求。并且浏览器会接收服务器返回的内容，只不过浏览器在接收到数据返回的时候，会发现里面没有 Access-Control-Allow-Origin 并且设置为允许。那么浏览器会把请求返回的内容忽略掉，并且在命令行里报错。</p>
<p>也就是说，<strong>请求已经发送了，内容也返回了，只不过浏览器在解析了返回的内容以后，发现这是不允许的，所以拦截了。</strong>这是浏览器提供的功能。例如我们使用 url 发送请求，它是没有跨域的概念的，任何的请求都是可以发出并且拿到返回的内容。</p>
<h2 id="二、CORS预请求"><a href="#二、CORS预请求" class="headerlink" title="二、CORS预请求"></a>二、CORS预请求</h2><p>在发送 CORS 请求时，浏览器检测到跨域请求，会自动发出一个 OPTIONS 请求来检验本次请求是否被服务器接受。服务器接收到该预请求之后，就会返回与 CORS 相关的响应头。服务器通过了 CORS 跨域请求后，客户端才会发送正式的数据。</p>
<p>所以整个请求过程其实是发生了两次请求：预请求、实际数据请求。可以参考下图：</p>
<img src="001.jpeg">



<p>一个 OPTIONS 请求一般会携带下面两个与 CORS 相关的头：</p>
<ul>
<li><code>Access-Control-Request-Method</code>：本次预检请求的请求方法</li>
<li><code>Access-Control-Request-Headers</code>：本次请求所携带的自定义首部字段</li>
</ul>
<p>服务端收到该预请求后，会返回与CORS相关的响应头，主要会包括下面几个：</p>
<ul>
<li><code>Access-Control-Allow-Origin</code>：服务器允许的跨域请求源</li>
<li><code>Access-Control-Allow-Methods</code>：服务器允许的请求方法</li>
<li><code>Access-Control-Allow-Headers</code> ：服务器允许的自定义的请求首部字段</li>
<li><code>Access-Control-Max-Age</code>：服务器允许以这种方式发生跨域请求的最长时间（单位为s），这段时间内不需要再发送预请求进行验证，可以直接发送正式的请求</li>
</ul>
<blockquote>
<p>注意：</p>
<p>1）在上面的两次请求中，预请求只是一个检查的过程，它不会携带任何请求的参数；预请求通过后的请求才会真正的携带请求参数与服务器进行数据通信。</p>
<p>2）若服务器对预检请求没有任何响应，那么浏览器不知道服务器是否支持CORS而不会发送后续的实际请求；若服务器不支持当前的跨域访问，浏览器也不会发送后续请求。</p>
</blockquote>
<h4 id="发生预请求的条件"><a href="#发生预请求的条件" class="headerlink" title="发生预请求的条件"></a>发生预请求的条件</h4><p>预请求并不是 CORS 请求的必须过程，在满足一定条件下是不需要发送预请求的。判断预请求发生的条件：<strong>是否是简单请求</strong>。如果是简单请求，则会直接发送具体的请求而不会发送预请求。具体来说：</p>
<p>满足下面的<strong>所有条件</strong>就不会产生预检请求，即该请求是简单请求：</p>
<ul>
<li>请求方式是 <strong>GET</strong>、<strong>HEAD</strong>、<strong>POST</strong>中的任意一个</li>
<li>Content-Type 的值必须是 <strong>test&#x2F;plain</strong>、<strong>multipart&#x2F;form-data</strong>、<strong>application&#x2F;x-www-form-urlencoded</strong>中的任意一个</li>
<li>必须是以下定义对CORS安全的首部字段集合，不能是集合之外的其他首部字段：Accept、Accept-Language、Content-Language、Content-Type、DPR、Downlink、Save-Data、Viewport-Width、Width</li>
</ul>
<p>满足上面所有的请求才不会发送预请求。在实际项目中我们的请求格式可能是 application&#x2F;json 格式编码，或者使用自定义请求头，这样都会触发CORS的预请求。</p>
<h4 id="发送预请求的实例："><a href="#发送预请求的实例：" class="headerlink" title="发送预请求的实例："></a>发送预请求的实例：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">&#x27;http://bar.other/resources/post-here/&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> body = <span class="string">&#x27;&lt;?xml version=&quot;1.0&quot;?&gt;&lt;person&gt;&lt;name&gt;Arun&lt;/name&gt;&lt;/person&gt;&#x27;</span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">callCors</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">if</span>(xhr)</span><br><span class="line">    &#123;</span><br><span class="line">      xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, url, <span class="literal">true</span>);</span><br><span class="line">      xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;X-PINGOTHER&#x27;</span>, <span class="string">&#x27;pingpong&#x27;</span>);</span><br><span class="line">      xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/xml&#x27;</span>);</span><br><span class="line">      xhr.<span class="property">onreadystatechange</span> = handler;</span><br><span class="line">      xhr.<span class="title function_">send</span>(body); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面请求中在请求中添加了自定义首部字段 X-PINGOTHER，并且请求的 Content-Type 值 application&#x2F;xml。因此该请求首先会触发一个预检请求。具体的过程见下图：</p>
<img src="002.png">

<p>通过上图可以看到浏览器实际与服务器产生了2次交互，最后一次会将请求参数传给服务器。这样一个 CORS 请求过程就完成了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/04/HTTP005/" data-id="clur520qp001pmoccb4y5g1l8" data-title="CORS跨域资源共享、CORS预请求" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-HTTP004" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/04/HTTP004/" class="article-date">
  <time class="dt-published" datetime="2021-02-04T06:11:36.000Z" itemprop="datePublished">2021-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/04/HTTP004/">同源政策、JSONP</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、同源政策"><a href="#一、同源政策" class="headerlink" title="一、同源政策"></a>一、同源政策</h2><h4 id="Ajax请求限制："><a href="#Ajax请求限制：" class="headerlink" title="Ajax请求限制："></a>Ajax请求限制：</h4><p>Ajax 请求时，浏览器要求当前网页和服务器必须同源。</p>
<h4 id="什么是同源："><a href="#什么是同源：" class="headerlink" title="什么是同源："></a>什么是同源：</h4><p>如果两个页面拥有相同的协议、域名、端口，那么这两个页面就属于一个源，其中只要有一个不相同，就是不同源。</p>
<h4 id="同源政策的目的："><a href="#同源政策的目的：" class="headerlink" title="同源政策的目的："></a>同源政策的目的：</h4><p>同源政策是为了保证用户信息的安全，防止恶意的网站窃取数据。</p>
<p>最初的同源政策就是指A网站在客户端设置的Cookie，B网站是不能访问的。随着互联网的发展，同源政策也越来越严格，在不同源的情况下，其中有一项规定就是无法向非同源地址发生Ajax请求，如果请求，浏览器就会报错。（实际上Ajax会被发送出去，但是浏览器会拒绝接受服务器的响应，所以会失败）</p>
<h2 id="二、使用JSONP解决同源限制问题"><a href="#二、使用JSONP解决同源限制问题" class="headerlink" title="二、使用JSONP解决同源限制问题"></a>二、使用JSONP解决同源限制问题</h2><p>jsonp 是 json with padding 的缩写，它不属于Ajax请求，但是它可以模拟Ajax请求。</p>
<p>jsonp实际上就是绕过浏览器同源请求的限制，向非同源服务器发送请求。</p>
<p>核心：利用script标签的src属性不受同源政策的影响来完成请求，它属于get请求。</p>
<p>同样不受同源政策影响的还有link标签、img标签的src属性。</p>
<h4 id="第一步（客户端）：将非同源的服务器端地址写在script标签的src属性中"><a href="#第一步（客户端）：将非同源的服务器端地址写在script标签的src属性中" class="headerlink" title="第一步（客户端）：将非同源的服务器端地址写在script标签的src属性中"></a>第一步（客户端）：将非同源的服务器端地址写在script标签的src属性中</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;www.example.com&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>1）在浏览器端，并不是所有能够发送请求的途径都受同源政策的限制，例如script标签的src属性就拥有发送请求的能力，但却不受同源政策的影响。例如我们在引入jquery时，就可以写线上的jquery文件地址。</p>
<p>2）请求地址不一定需要以 .js 结尾。但是不管请求地址以什么结尾，都必须返回合法的js代码。因为script标签在加载完请求地址中的内容以后，会将内容作为js代码来执行。</p>
<h4 id="第二步（服务器端）：服务器端响应的数据必须是一个函数的调用，真正要发生给客户端的数据需要作为函数调用的参数"><a href="#第二步（服务器端）：服务器端响应的数据必须是一个函数的调用，真正要发生给客户端的数据需要作为函数调用的参数" class="headerlink" title="第二步（服务器端）：服务器端响应的数据必须是一个函数的调用，真正要发生给客户端的数据需要作为函数调用的参数"></a>第二步（服务器端）：服务器端响应的数据必须是一个函数的调用，真正要发生给客户端的数据需要作为函数调用的参数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = <span class="string">&#x27;fn(&#123;name:&quot;张三&quot;, age:&quot;20&quot;&#125;)&#x27;</span></span><br><span class="line">res.<span class="title function_">send</span>(data)</span><br></pre></td></tr></table></figure>

<p>浏览器端通过script标签将响应内容加载完毕以后，会自动将响应内容作为js代码来执行。</p>
<p>实际上，响应内容加载完毕后，会立即调用fn这个函数，因为加载过来的内容就是函数调用的代码。</p>
<p>服务器端响应的必须是一个字符串，字符串中包裹着函数调用的代码。如果没有被字符串包裹，这个函数会在服务器端被执行，而实际上我们要让它在客户端被执行。还要将客户端真正需要的数据，写在函数的实参里，因为函数在客户端被执行的时候，客户端可以通过形参来对应这个数据。</p>
<p>也就是说，客户端可以通过函数的形参拿到服务器端返回的真正数据。</p>
<p>需要注意，这个函数是在客户端被执行，因此客户端要事先准备好这个函数的定义，具体看第三步。</p>
<h4 id="第三步（客户端）：在客户端全局作用域下定义函数fn-，并在fn函数内部对服务器响应的数据进行处理"><a href="#第三步（客户端）：在客户端全局作用域下定义函数fn-，并在fn函数内部对服务器响应的数据进行处理" class="headerlink" title="第三步（客户端）：在客户端全局作用域下定义函数fn( )，并在fn函数内部对服务器响应的数据进行处理"></a>第三步（客户端）：在客户端全局作用域下定义函数fn( )，并在fn函数内部对服务器响应的数据进行处理</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  	<span class="comment">// 处理数据</span></span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>客户端完整实例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">fn</span> (data) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;客户端的fn函数被调用了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span><br><span class="line"><span class="language-javascript">    &#125;    </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 1.将非同源服务器端的请求地址写在script标签的src属性中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:3001/test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>后续会写对 JSONP 代码进行优化的内容~~</strong></p>
<img src="001.jpeg">


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/04/HTTP004/" data-id="clur520qn001cmoccdrvq1f0h" data-title="同源政策、JSONP" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-HTTP003" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/04/HTTP003/" class="article-date">
  <time class="dt-published" datetime="2021-02-04T05:03:57.000Z" itemprop="datePublished">2021-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/04/HTTP003/">HTTP报文格式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>HTTP 是请求与响应的格式，也就是发起请求的这一方永远是主动的，发起了请求之后服务器端才会给我们一个响应。</p>
<img src="001.png">

<h4 id="HTTP-方法"><a href="#HTTP-方法" class="headerlink" title="HTTP 方法"></a>HTTP 方法</h4><p>HTTP 方法用来定义对于资源的操作，常用的有 GET、POST等，从定义上讲有各自的语义。</p>
<p>再次强调：这只是定义上的语义，到底如何实现取决于具体的操作。</p>
<h4 id="HTTP-CODE"><a href="#HTTP-CODE" class="headerlink" title="HTTP CODE"></a>HTTP CODE</h4><p>定义服务器对请求的处理结果，各个区间的 CODE 有各自的语义，好的 HTTP 服务可以通过 CODE 判断结果。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/04/HTTP003/" data-id="clur520qm001amoccfki869pj" data-title="HTTP报文格式" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-HTTP002" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/04/HTTP002/" class="article-date">
  <time class="dt-published" datetime="2021-02-04T03:32:02.000Z" itemprop="datePublished">2021-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/04/HTTP002/">URI、URL、URN</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h3><p>Uniform Resourse Identifier（统一资源标识符）</p>
<p>用来唯一标识互联网上的信息资源，是包含 URL 和 URN 的统一的定义。</p>
<h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h3><p>Uniform Resourse Locator（统一资源定位符）</p>
<p>例子：<a target="_blank" rel="noopener" href="http://user:pass@host.com/path?query=string#hash">http://user:pass@host.com:80/path?query=string#hash</a></p>
<ul>
<li><strong>http:&#x2F;&#x2F;</strong> 定义以什么协议访问资源。</li>
<li><strong>user:pass@</strong> 如果访问的资源需要特定的身份，我们可以通过这个表示身份，并且服务可以通过用户名与密码来进行验证。但是这样不安全，现在几乎用不到。</li>
<li><strong>host.com</strong> 可以是域名也可以是 ip，用于定位资源所在服务器在互联网中的位置。</li>
<li><strong>:80</strong> 端口，在一台服务器上可以运行很多软件的 web 服务，web 服务分别监听不同的端口。我们通过端口指定在找的是这台服务器上的哪个 web 服务。不写的情况下默认为 80 端口。</li>
<li><strong>&#x2F;path</strong> 路由，在一个 web 服务上可能存放了很多不同的内容，我们通过路由来找到具体所需要的内容。写法与 linux 中文件目录的路径相似。</li>
<li><strong>?query&#x3D;string</strong> 搜索参数</li>
<li><strong>#hash</strong> 我们通过前面的部分找到了一个文档，这个文档可能非常大。但是客户端端可能不需要这么多的内容，只需要某一部分的内容。hash 就可以帮我们定位到文档的某一个片段。现在的 web 开发也常用 hash 作为锚点的定位工具。</li>
</ul>
<h3 id="URN"><a href="#URN" class="headerlink" title="URN"></a>URN</h3><p>永久统一资源定位符</p>
<p>在资源移动之后还能被找到，但是目前还没有非常成熟的使用方案。</p>
<img src="001.jpeg">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/04/HTTP002/" data-id="clur520qm0018moccavlj87li" data-title="URI、URL、URN" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES/" rel="tag">ES</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%BC%E5%90%88/" rel="tag">综合</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ES/" style="font-size: 20px;">ES</a> <a href="/tags/HTTP/" style="font-size: 16.67px;">HTTP</a> <a href="/tags/Vue/" style="font-size: 13.33px;">Vue</a> <a href="/tags/%E7%BB%BC%E5%90%88/" style="font-size: 10px;">综合</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/18/ZH002/">浏览器中的进程</a>
          </li>
        
          <li>
            <a href="/2021/06/26/HTTP013/">HTTP缓存</a>
          </li>
        
          <li>
            <a href="/2021/05/31/HTTP012/">JSONP</a>
          </li>
        
          <li>
            <a href="/2021/05/26/HTTP011/">常见 Web 攻击总结</a>
          </li>
        
          <li>
            <a href="/2021/05/17/Vue007/">【Vue3.x】Vue3响应式原理</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>